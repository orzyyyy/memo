"use strict";(self.webpackChunkmemo=self.webpackChunkmemo||[]).push([[801],{4006:(e,n,t)=>{t.d(n,{Z:()=>y});var r=t(7692),a=t(9526),c=t(3246),o=t(5701),i=t.n(o),l=t(8236),u=t.n(l),s=t(6080),f=t.n(s),d=t(6850),p=t.n(d),v=t(7182),m=t.n(v),h=t(9213),g=t.n(h),b=t(7611),w={};w.styleTagTransform=g(),w.setAttributes=p(),w.insert=f().bind(null,"head"),w.domAPI=u(),w.insertStyleElement=m(),i()(b.Z,w),b.Z&&b.Z.locals&&b.Z.locals;const y=function(e){var n=e.style,t=e.children,o=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["style","children"]);return a.createElement("input",(0,r.Z)({style:(0,r.Z)({},c.z,n)},o),t)}},6801:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var r=t(5819),a=t(2256),c=t(107),o=t.n(c),i=t(9526),l=t(5701),u=t.n(l),s=t(8236),f=t.n(s),d=t(6080),p=t.n(d),v=t(6850),m=t.n(v),h=t(7182),g=t.n(h),b=t(9213),w=t.n(b),y=t(7596),Z={};Z.styleTagTransform=w(),Z.setAttributes=m(),Z.insert=p().bind(null,"head"),Z.domAPI=f(),Z.insertStyleElement=g(),u()(y.Z,Z),y.Z&&y.Z.locals&&y.Z.locals;var x=t(860),k=t(1733),E=t(4006),O=function(e,n,t,r){return new(t||(t=Promise))((function(a,c){function o(e){try{l(r.next(e))}catch(e){c(e)}}function i(e){try{l(r.throw(e))}catch(e){c(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}l((r=r.apply(e,n||[])).next())}))};const C=function(){var e=(0,i.useState)([]),n=(0,a.Z)(e,2),t=n[0],c=n[1],l=(0,i.useState)(2),u=(0,a.Z)(l,2),s=u[0],f=u[1],d=(0,i.useState)(8),p=(0,a.Z)(d,2),v=p[0],m=p[1],h=function(e,n){for(var t=[],r=0;r<e;r++){for(var a={},c=0;c<n;c++)a[c]=(0,i.createRef)();t.push(a)}return t}(s,v),g=(0,i.useMemo)((function(){return h}),[s,v]),b=function(e,n){var t=e.target.value;switch(n){case"row":f(parseInt(t));break;case"col":m(parseInt(t))}};return i.createElement("div",{className:"slicing-image"},i.createElement("span",null,"行："),i.createElement(E.Z,{type:"number",value:s,onChange:function(e){return b(e,"row")}}),i.createElement("span",null,"列："),i.createElement(E.Z,{type:"number",value:v,onChange:function(e){return b(e,"col")}}),i.createElement(x.Z,{fileList:t,onChange:function(e){var n,a,i;c([].concat((0,r.Z)(t),(0,r.Z)(e))),n=e[0].url,a=v,i=s,O(void 0,void 0,void 0,o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Image).src=n,e.next=4,new Promise((function(e){t.onload=function(){for(var n,r,c=t.naturalWidth,o=t.naturalHeight,l=c/a,u=o/i,s=0;s<h.length;s++)for(var f=Object.values(h[s]),d=0;d<f.length;d++)null===(r=null===(n=f[d].current)||void 0===n?void 0:n.getContext("2d"))||void 0===r||r.drawImage(t,l*d,s*u,l,u,0,0,35,35);e(0)}}));case 4:case"end":return e.stop()}}),e)})))},uploaderVisible:0===t.length,onClick:function(e){c(t.filter((function(n){return n.id!==e.id})))},accept:"image/*"}),i.createElement("div",null,function(){for(var e=[],n=0;n<s;n++){e.push(i.createElement("div",{style:{marginTop:0===n?0:-6},key:"".concat(n,"-placeholder")}));for(var t=0;t<v;t++)e.push(i.createElement("canvas",{ref:g[n][t],width:"35",height:"35",key:"".concat(n,"-").concat(t)}))}return e}()),i.createElement(k.Z,{onClick:function(){return O(void 0,void 0,void 0,o().mark((function e(){var n,t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e,n,t){var r=e.current.toDataURL("image/png"),a=document.createElement("a");a.download="".concat(t+1,"-").concat(n+1,".png"),a.href=r,a.click()},t=o().mark((function e(t){var r,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=g[t],a=o().mark((function e(a){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object.values(r)[a],e.next=3,new Promise((function(e){n(c,a,t),setTimeout((function(){e(0)}),100)}));case 3:case"end":return e.stop()}}),e)})),c=0;case 3:if(!(c<Object.values(r).length)){e.next=8;break}return e.delegateYield(a(c),"t0",5);case 5:c++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})),r=0;case 3:if(!(r<g.length)){e.next=8;break}return e.delegateYield(t(r),"t0",5);case 5:r++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})))}},"下载"))}},7611:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(5402),a=t.n(r),c=t(352),o=t.n(c)()(a());o.push([e.id,"input {\n  border: 1px solid #e8e8e8;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n\ninput:hover {\n  border: 1px solid rgb(16, 142, 233);\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n",""]);const i=o},7596:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(5402),a=t.n(r),c=t(352),o=t.n(c)()(a());o.push([e.id,".slicing-image canvas {\n  margin-top: 3px;\n  margin-left: 3px;\n  border: 1px solid #ccc;\n}\n",""]);const i=o}}]);