(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1510:function(e,t,a){"use strict";a.r(t);var n=a(90),r=a.n(n),l=a(81),i=a.n(l),o=a(2),u=a.n(o),s=a(0),c=a.n(s),p=a(1487),h=a(1490),m=a(1486),g=a(1512),d=a(1488),f=a(1491),v=a(1493),b=a(1505),y=a(1514),E=a(1498),x=a(1499),C=a(70),S=a(1515),O=a(1500),j=a(1497),w=a(1327),T=a.n(w),k=a(1326),B=a.n(k),I=a(1325),M=a.n(I),V=a(67),L=a(72),N=a(1507),W=a(1485),q=Object(V.a)((function(e){return Object(L.a)({container:{display:"flex",flexWrap:"wrap"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},formControl:{margin:e.spacing(1)},title:{flexGrow:1},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-50},buttonSuccess:{backgroundColor:W.a[500],"&:hover":{backgroundColor:W.a[700]}},success:{backgroundColor:W.a[600]},failed:{backgroundColor:e.palette.error.dark},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}})})),F=function(e){var t=e.key,a=e.error,n=e.inputLabel,r=e.inputValue,l=e.helperText,i=e.xs,o=e.unit,u=void 0===o?"mm":o,s=e.readOnly,h=void 0!==s&&s,b=e.required,y=void 0===b||b,E=e.onChange,x=e.onBlur,C=e.classes,S=e.shrink,O=void 0!==S&&S;return c.a.createElement(m.a,{item:!0,xs:i,key:t},c.a.createElement(p.a,{required:y,className:C.formControl,error:a},c.a.createElement(g.a,{shrink:O||!!r},n),c.a.createElement(d.a,{value:r,type:"number",onChange:function(e){return E(e,t)},onBlur:x,endAdornment:c.a.createElement(f.a,{position:"end"},u),readOnly:h}),c.a.createElement(v.a,null,l)))},D=function(e){var t=e.formOptions,a=e.formData,n=e.classes,l=e.handleSelectChange,i=e.handleAutocompleteChange,o=e.handleInputChange,u=e.onSpecificationInputBlur,s=function(e,t){var a=parseInt(""+t.materialType);return e.filter((function(e){return 0===a?!t.length||t.length==e["长"]:1===a?t.length&&t.width?t.length==e["长"]&&t.width==e["宽"]:t.width?t.width==e["宽"]:!t.length||t.length==e["长"]:void 0}))}(t.materialId,a),h=parseInt(""+a.materialType);return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{item:!0,xs:6},c.a.createElement(p.a,{required:!0,fullWidth:!0,className:n.formControl,error:a.materialTypeError},c.a.createElement(g.a,null,"类别"),c.a.createElement(b.a,{value:a.materialType,onChange:function(e){return l(e,"materialType")}},t.materialType.map((function(e){var t=e.text,a=e.value;return c.a.createElement(y.a,{value:a,key:t+"-"+a},t)}))))),c.a.createElement(m.a,{item:!0,xs:6},c.a.createElement(p.a,{required:!0,fullWidth:!0,className:n.formControl,error:a.sellTypeError},c.a.createElement(g.a,null,"卖出类型"),c.a.createElement(b.a,{value:a.sellType,onChange:function(e){return l(e,"sellType")}},t.sellType.map((function(e){var t=e.text,a=e.value;return c.a.createElement(y.a,{value:a,key:t+"-"+a},t)}))))),function(e){var t=e.handleInputChange,a=e.formData,n=e.onSpecificationInputBlur,r=e.classes;switch(parseInt(""+a.materialType)){case 0:return c.a.createElement(c.a.Fragment,null,F({key:"length",error:a.lengthError,inputLabel:"截面直径",inputValue:a.length,helperText:a.lengthMessage,xs:6,onChange:t,onBlur:n,classes:r}));case 1:return c.a.createElement(c.a.Fragment,null,F({key:"length",error:a.lengthError,inputLabel:"截面长度",inputValue:a.length,helperText:a.lengthMessage,xs:6,onChange:t,onBlur:n,classes:r}),F({key:"width",error:a.widthError,inputLabel:"截面宽度",inputValue:a.width,helperText:a.widthMessage,xs:6,onChange:t,onBlur:n,classes:r}));default:return null}}({handleInputChange:o,formData:a,onSpecificationInputBlur:u,classes:n}),0===h&&c.a.createElement(m.a,{item:!0,xs:6,key:"round"},c.a.createElement(p.a,{required:!0,fullWidth:!0,className:n.formControl,error:a.roundError},c.a.createElement(g.a,{shrink:-1!==a.round},"圆钢类别"),c.a.createElement(b.a,{value:a.round,onChange:function(e){return l(e,"roundType")}},t.roundType.map((function(e){var t=e.text,a=e.value;return c.a.createElement(y.a,{value:a,key:t+"-"+a},t)}))))),c.a.createElement(p.a,{fullWidth:!0,error:a.materialTypeError,className:n.formControl},c.a.createElement(N.a,{options:s,getOptionLabel:function(e){return e["材质"]},value:a.materialId,onChange:i,id:"material-id","aria-controls":"material-id",renderInput:function(e){return c.a.createElement(E.a,r()({},e,{fullWidth:!0,margin:"normal",required:!0,label:"材质",error:a.materialTypeError}))}}),c.a.createElement(v.a,null,a.materialTypeMessage)))},P=function(e){var t=e.classes,a=e.onSubmit,n=e.loading;return c.a.createElement(p.a,{fullWidth:!0,className:t.formControl},c.a.createElement(x.a,{variant:"contained",color:"primary",disabled:n,onClick:a},"保存"),n&&c.a.createElement(C.a,{size:24,className:t.buttonProgress}))},Q=function(e){var t=e.type,a=e.message,n=e.open,r=e.onClose,l=q();return c.a.createElement(S.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n},c.a.createElement(O.a,{className:l[t],message:c.a.createElement("span",{className:l.message},"success"===t?c.a.createElement(M.a,{className:l.iconVariant}):c.a.createElement(B.a,{className:l.iconVariant}),c.a.createElement("span",null,a)),action:[c.a.createElement(j.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},c.a.createElement(T.a,{className:l.icon}))]}))},A=function(e){var t=e.onSubmit,a=e.formData,n=e.onChange,r=e.onSpecificationInputBlur,l=e.formOptions,i=e.loading,o=q(),u=function(e,t){n({text:e.target.value,value:e.target.value},"input",t)};return c.a.createElement("div",{className:o.container},D({formOptions:l,formData:a,classes:o,handleSelectChange:function(e,t){n({text:"",value:e.target.value},"select",t)},handleAutocompleteChange:function(e,t){n(t,"autoComplete")},handleInputChange:u,onSpecificationInputBlur:r}),F({key:"weight",error:a.weightError,inputLabel:"实际重量",inputValue:a.weight,helperText:a.weightMessage,xs:6,unit:"kg",onChange:u,onBlur:r,classes:o}),F({key:"height",error:a.heightError,inputLabel:"高度",inputValue:a.height,helperText:a.heightMessage,xs:6,onChange:u,onBlur:r,classes:o}),F({key:"materialCost",error:a.materialCostError,inputLabel:"单价",inputValue:a.materialCost,helperText:a.materialCostMessage,xs:6,unit:"元/kg",onChange:u,onBlur:r,classes:o}),F({key:"freight",error:a.freightError,inputLabel:"运费",inputValue:a.freight,helperText:a.freightMessage,xs:6,unit:"元",onChange:u,onBlur:r,classes:o}),F({key:"extraCost",error:!1,inputLabel:"其他费用",inputValue:a.extraCost,helperText:"",xs:6,unit:"元",onChange:u,onBlur:r,classes:o,required:!1}),F({key:"predictWeight",error:!1,inputLabel:"预估重量",inputValue:a.predictWeight,helperText:"计算公式：体积 x 密度",xs:6,unit:"kg",readOnly:!0,required:!1,onChange:u,onBlur:r,classes:o}),c.a.createElement(p.a,{fullWidth:!0,className:o.formControl},c.a.createElement(h.a,{placeholder:"备注",rows:8,onChange:function(e){return u(e,"description")},value:a.description})),P({classes:o,onSubmit:t,loading:i}))},z=function(e){var t=e.onSubmit,a=e.formData,n=e.formOptions,r=e.onChange,l=e.onSpecificationInputBlur,i=e.loading,o=q(),u=function(e,t){r({text:e.target.value,value:e.target.value},"input",t)};return c.a.createElement("div",{className:o.container},D({formOptions:n,formData:a,classes:o,handleSelectChange:function(e,t){r({text:"",value:e.target.value},"select",t)},handleAutocompleteChange:function(e,t){r(t,"autoComplete")},handleInputChange:u,onSpecificationInputBlur:l}),F({key:"weight",error:a.weightError,inputLabel:"实际重量",inputValue:a.weight,helperText:a.weightMessage,xs:6,unit:"kg",onChange:u,onBlur:l,classes:o}),F({key:"height",error:a.heightError,inputLabel:"高度",inputValue:a.height,helperText:a.heightMessage,xs:6,onChange:u,onBlur:l,classes:o}),F({key:"materialQuantity",error:a.materialQuantityError,inputLabel:"数量",inputValue:a.materialQuantity,helperText:a.materialQuantityMessage,xs:6,unit:"个",onChange:u,onBlur:l,classes:o}),F({key:"materialCost",error:!1,inputLabel:"单价",inputValue:a.materialCost,helperText:"",xs:6,unit:"元/kg",readOnly:!0,required:!1,onChange:u,onBlur:l,classes:o}),F({key:"predictWeight",error:!1,inputLabel:"预估重量",inputValue:a.predictWeight,helperText:"计算公式：体积 x 密度",xs:6,unit:"kg",readOnly:!0,required:!1,onChange:u,onBlur:l,classes:o}),F({key:"costFee",error:!1,inputLabel:"据费",inputValue:a.costFee,helperText:"",xs:6,unit:"元/个",readOnly:!0,required:!1,onChange:u,onBlur:l,classes:o}),F({key:"predictPrice",error:!1,inputLabel:"预估总价",inputValue:a.predictPrice,helperText:"",xs:6,unit:"元",readOnly:!0,required:!1,onChange:u,onBlur:l,classes:o}),c.a.createElement(p.a,{fullWidth:!0,className:o.formControl},c.a.createElement(h.a,{placeholder:"备注",rows:8,onChange:function(e){return u(e,"description")},value:a.description})),P({classes:o,onSubmit:t,loading:i}))},J=a(1501),G=a(1502),R=a(1492),H=a(1328),K=a.n(H),U=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function i(e){try{u(n.next(e))}catch(e){l(e)}}function o(e){try{u(n.throw(e))}catch(e){l(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))};t.default=function(){var e=Object(s.useState)(!1),t=u()(e,2),a=t[0],n=t[1],l=Object(s.useState)(!1),o=u()(l,2),p=o[0],h=o[1],m=Object(s.useState)(!1),g=u()(m,2),d=g[0],f=g[1],v=Object(s.useState)([]),b=u()(v,2),y=b[0],E=b[1],x=Object(s.useState)([]),C=u()(x,2),S=C[0],O=C[1],w=Object(s.useState)([]),T=u()(w,2),k=T[0],B=T[1],I=Object(s.useState)([]),M=u()(I,2),V=M[0],L=M[1],N=Object(s.useState)(0),W=u()(N,2),q=W[0],F=W[1],D=Object(s.useState)(),P=u()(D,2),H=P[0],X=P[1],Y=Object(s.useState)(!1),Z=u()(Y,2),$=Z[0],_=Z[1],ee=Object(s.useState)(""),te=u()(ee,2),ae=te[0],ne=te[1],re=Object(s.useState)(),le=u()(re,2),ie=le[0],oe=le[1],ue=Object(s.useState)(!1),se=u()(ue,2),ce=se[0],pe=se[1],he=Object(s.useState)(""),me=u()(he,2),ge=me[0],de=me[1],fe=Object(s.useState)(),ve=u()(fe,2),be=ve[0],ye=ve[1],Ee=Object(s.useState)(!1),xe=u()(Ee,2),Ce=xe[0],Se=xe[1],Oe=Object(s.useState)(""),je=u()(Oe,2),we=je[0],Te=je[1],ke=Object(s.useState)(),Be=u()(ke,2),Ie=Be[0],Me=Be[1],Ve=Object(s.useState)(!1),Le=u()(Ve,2),Ne=Le[0],We=Le[1],qe=Object(s.useState)(""),Fe=u()(qe,2),De=Fe[0],Pe=Fe[1],Qe=Object(s.useState)(),Ae=u()(Qe,2),ze=Ae[0],Je=Ae[1],Ge=Object(s.useState)(!1),Re=u()(Ge,2),He=Re[0],Ke=Re[1],Ue=Object(s.useState)(""),Xe=u()(Ue,2),Ye=Xe[0],Ze=Xe[1],$e=Object(s.useState)(),_e=u()($e,2),et=_e[0],tt=_e[1],at=Object(s.useState)(!1),nt=u()(at,2),rt=nt[0],lt=nt[1],it=Object(s.useState)(""),ot=u()(it,2),ut=ot[0],st=ot[1],ct=Object(s.useState)(),pt=u()(ct,2),ht=pt[0],mt=pt[1],gt=Object(s.useState)(!1),dt=u()(gt,2),ft=dt[0],vt=dt[1],bt=Object(s.useState)(""),yt=u()(bt,2),Et=yt[0],xt=yt[1],Ct=Object(s.useState)(),St=u()(Ct,2),Ot=St[0],jt=St[1],wt=Object(s.useState)(),Tt=u()(wt,2),kt=Tt[0],Bt=Tt[1],It=Object(s.useState)(!1),Mt=u()(It,2),Vt=Mt[0],Lt=Mt[1],Nt=Object(s.useState)(""),Wt=u()(Nt,2),qt=Wt[0],Ft=Wt[1],Dt=Object(s.useState)(),Pt=u()(Dt,2),Qt=Pt[0],At=Pt[1],zt=Object(s.useState)(""),Jt=u()(zt,2),Gt=Jt[0],Rt=Jt[1],Ht=Object(s.useState)(),Kt=u()(Ht,2),Ut=Kt[0],Xt=Kt[1],Yt=Object(s.useState)(!1),Zt=u()(Yt,2),$t=Zt[0],_t=Zt[1],ea=Object(s.useState)(""),ta=u()(ea,2),aa=ta[0],na=ta[1],ra=Object(s.useState)(0),la=u()(ra,2),ia=la[0],oa=la[1],ua=Object(s.useState)(0),sa=u()(ua,2),ca=sa[0],pa=sa[1],ha=Object(s.useState)(-1),ma=u()(ha,2),ga=ma[0],da=ma[1],fa=Object(s.useState)(!1),va=u()(fa,2),ba=va[0],ya=va[1],Ea=Object(s.useState)(""),xa=u()(Ea,2),Ca=xa[0],Sa=xa[1],Oa=Object(s.useState)(-1),ja=u()(Oa,2),wa=ja[0],Ta=ja[1],ka=Object(s.useState)(!1),Ba=u()(ka,2),Ia=Ba[0],Ma=Ba[1],Va=Object(s.useState)(""),La=u()(Va,2),Na=La[0],Wa=La[1];Object(s.useEffect)((function(){U(void 0,void 0,void 0,i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/toy/get/get-material-type?sign=9");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,L(a);case 7:case"end":return e.stop()}}),e)}))),U(void 0,void 0,void 0,i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/toy/get/get-material-type?sign=1");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,E(a);case 7:case"end":return e.stop()}}),e)}))),U(void 0,void 0,void 0,i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/toy/get/get-material-type?sign=10");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,B(a);case 7:case"end":return e.stop()}}),e)})))}),[]);var qa=function(){var e=!1;return H||(_(!0),ne("该项不能为空"),e=!0),be||(Se(!0),Te("该项不能为空"),e=!0),Ie||(We(!0),Pe("该项不能为空"),e=!0),ze||"0"===H||(Ke(!0),Ze("该项不能为空"),e=!0),et||(lt(!0),st("该项不能为空"),e=!0),ht||(vt(!0),xt("该项不能为空"),e=!0),kt||(Lt(!0),Ft("该项不能为空"),e=!0),-1===ga&&(ya(!0),Sa("该项不能为空"),e=!0),-1===wa&&(Ma(!0),Wa("该项不能为空"),e=!0),{hasError:e,params:{materialType:H,materialCost:be,type:q,length:Ie,width:ze,height:et,weight:ht,freight:kt,description:Gt,extraCost:Qt,materialId:ie,materialQuantity:Ut,round:ga,sellType:wa}}},Fa=function(e){return U(void 0,void 0,void 0,i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/toy/get/get-detail?materialType="+e);case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,O(n);case 7:case"end":return t.stop()}}),t)})))},Da=function(){f(!1),h(!1),n(!1),X(""),oe(""),ye(""),Me(""),Je(""),tt(""),mt(""),jt(""),Bt(""),At(""),Rt(""),Xt(""),oa(0),pa(0)},Pa={materialType:H,materialTypeError:$,materialTypeMessage:ae,materialId:ie,materialIdError:ce,materialIdMessage:ge,materialCost:be,materialCostError:Ce,materialCostMessage:we,type:q,length:Ie,lengthError:Ne,lengthMessage:De,width:ze,widthError:He,widthMessage:Ye,height:et,heightError:rt,heightMessage:ut,weight:ht,weightError:ft,weightMessage:Et,predictWeight:Ot,freight:kt,freightError:Vt,freightMessage:qt,extraCost:Qt,description:Gt,round:ga,roundError:ba,roundMessage:Ca,sellType:wa,sellTypeError:Ia,sellTypeMessage:Na},Qa={loading:a,onSubmit:function(){return U(void 0,void 0,void 0,i.a.mark((function e(){var t,a,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!0),t=qa(),a=t.hasError,r=t.params,!a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,fetch("/toy/good/in",{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}});case 6:return l=e.sent,e.next=9,l.text();case 9:return"success"===e.sent?h(!0):f(!0),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))},formOptions:{materialType:y,materialId:S,roundType:k,sellType:V},onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:"",text:""},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n={materialCost:function(){ye(e.value),Se(!e.value),Te(e.value?"":"该项不能为空")},freight:function(){Bt(e.value),Lt(""===e.value),Ft(""===e.value?"该项不能为空":"")},extraCost:function(){At(e.value)},description:function(){Rt(e.value)},length:function(){Me(e.value),We(!e.value),Pe(e.value?"":"该项不能为空")},width:function(){Je(e.value),Ke(!e.value),Ze(e.value?"":"该项不能为空")},height:function(){tt(e.value),lt(!e.value),st(e.value?"":"该项不能为空")},weight:function(){mt(e.value),vt(!e.value),xt(e.value?"":"该项不能为空")},predictWeight:function(){},materialQuantity:function(){Xt(e.value),_t(!e.value),na(e.value?"":"该项不能为空")},costFee:function(){},predictPrice:function(){},round:function(){da(e.value),ya(-1===e.value),Sa(-1===e.value?"该项不能为空":"")}},r={materialType:function(){X(e.value)},roundType:function(){da(e.value)},sellType:function(){Ta(e.value)}};switch(t){case"input":n[a]();break;case"select":e.value&&Fa(e.value),r[a]();break;case"autoComplete":if(null===e)return oe(""),oa(0),void ye(0);oa(e["锯费"]),ye(e["单价"]),oe(e.id),pe(""===e.id),de(""===e.id?"该项不能为空":"")}},onSpecificationInputBlur:function(){!function(e){pa(parseFloat((e*be+Ut*ia).toFixed(1)))}(function(e,t,a,n,r){0!==r||n||(n=1);var l=function(e,t,a){var r=Math.PI*e*e;return t&&(r=e*t),parseFloat((r*a*7.874/1e3*n).toFixed(2))}(e/2/10,t/10,a/10);return e&&a?jt(l):e&&t&&a&&jt(l),l}(Ie,ze,et,Ut,q))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(J.a,{position:"static"},c.a.createElement(G.a,null,c.a.createElement(j.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return F(0===q?1:0)}},c.a.createElement(K.a,null)),c.a.createElement(R.a,{variant:"h6"},q?"出库":"入库"))),Q({type:"success",message:"保存成功",open:p,onClose:Da}),Q({type:"failed",message:"保存失败",open:d,onClose:Da}),q?c.a.createElement(z,r()({formData:r()({},Pa,{materialQuantity:Ut,materialQuantityError:$t,materialQuantityMessage:aa,costFee:ia,predictPrice:ca})},Qa)):c.a.createElement(A,r()({formData:Pa},Qa)))}}}]);