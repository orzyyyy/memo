(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1510:function(e,t,a){"use strict";a.r(t);var n=a(90),r=a.n(n),i=a(81),l=a.n(i),o=a(2),u=a.n(o),s=a(0),c=a.n(s),h=a(1487),p=a(1490),g=a(1486),m=a(1512),d=a(1488),f=a(1491),v=a(1493),b=a(1505),C=a(1514),y=a(1498),x=a(1499),E=a(70),S=a(1515),O=a(1500),w=a(1497),j=a(1327),k=a.n(j),T=a(1326),B=a.n(T),I=a(1325),M=a.n(I),V=a(67),L=a(72),N=a(1507),W=a(1485),F=Object(V.a)((function(e){return Object(L.a)({container:{display:"flex",flexWrap:"wrap"},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},formControl:{margin:e.spacing(1)},title:{flexGrow:1},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-50},buttonSuccess:{backgroundColor:W.a[500],"&:hover":{backgroundColor:W.a[700]}},success:{backgroundColor:W.a[600]},failed:{backgroundColor:e.palette.error.dark},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}})})),q=function(e){var t=e.key,a=e.error,n=e.inputLabel,r=e.inputValue,i=e.helperText,l=e.xs,o=e.unit,u=void 0===o?"mm":o,s=e.readOnly,p=void 0!==s&&s,b=e.required,C=void 0===b||b,y=e.onChange,x=e.onBlur,E=e.classes,S=e.shrink,O=void 0!==S&&S;return c.a.createElement(g.a,{item:!0,xs:l,key:t},c.a.createElement(h.a,{required:C,className:E.formControl,error:a},c.a.createElement(m.a,{shrink:O||!!r},n),c.a.createElement(d.a,{value:r,type:"number",onChange:function(e){return y(e,t)},onBlur:x,endAdornment:c.a.createElement(f.a,{position:"end"},u),readOnly:p}),c.a.createElement(v.a,null,i)))},D=function(e){var t=e.formOptions,a=e.formData,n=e.classes,i=e.handleSelectChange,l=e.handleAutocompleteChange,o=e.handleInputChange,u=e.onSpecificationInputBlur,s=function(e,t){var a=parseInt(""+t.materialType);return e.filter((function(e){return 0===a?!t.length||t.length==e["长"]:1===a?t.length&&t.width?t.length==e["长"]&&t.width==e["宽"]:t.width?t.width==e["宽"]:!t.length||t.length==e["长"]:void 0}))}(t.materialId,a);return c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{required:!0,fullWidth:!0,className:n.formControl,error:a.materialTypeError},c.a.createElement(m.a,null,"类别"),c.a.createElement(b.a,{value:a.materialType,onChange:i},t.materialType.map((function(e){var t=e.text,a=e.value;return c.a.createElement(C.a,{value:a,key:t+"-"+a},t)})))),function(e){var t=e.handleInputChange,a=e.formData,n=e.onSpecificationInputBlur,r=e.classes;switch(parseInt(""+a.materialType)){case 0:return q({key:"length",error:a.lengthError,inputLabel:"截面直径",inputValue:a.length,helperText:a.lengthMessage,xs:6,onChange:t,onBlur:n,classes:r});case 1:return c.a.createElement(c.a.Fragment,null,q({key:"length",error:a.lengthError,inputLabel:"截面长度",inputValue:a.length,helperText:a.lengthMessage,xs:6,onChange:t,onBlur:n,classes:r}),q({key:"width",error:a.widthError,inputLabel:"截面宽度",inputValue:a.width,helperText:a.widthMessage,xs:6,onChange:t,onBlur:n,classes:r}));default:return null}}({handleInputChange:o,formData:a,onSpecificationInputBlur:u,classes:n}),c.a.createElement(h.a,{fullWidth:!0,error:a.materialTypeError,className:n.formControl},c.a.createElement(N.a,{options:s,getOptionLabel:function(e){return e["材质"]},value:a.materialId,onChange:l,id:"material-id","aria-controls":"material-id",renderInput:function(e){return c.a.createElement(y.a,r()({},e,{fullWidth:!0,margin:"normal",required:!0,label:"材质",error:a.materialTypeError}))}}),c.a.createElement(v.a,null,a.materialTypeMessage)))},P=function(e){var t=e.classes,a=e.onSubmit,n=e.loading;return c.a.createElement(h.a,{fullWidth:!0,className:t.formControl},c.a.createElement(x.a,{variant:"contained",color:"primary",disabled:n,onClick:a},"保存"),n&&c.a.createElement(E.a,{size:24,className:t.buttonProgress}))},Q=function(e){var t=e.type,a=e.message,n=e.open,r=e.onClose,i=F();return c.a.createElement(S.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n},c.a.createElement(O.a,{className:i[t],message:c.a.createElement("span",{className:i.message},"success"===t?c.a.createElement(M.a,{className:i.iconVariant}):c.a.createElement(B.a,{className:i.iconVariant}),c.a.createElement("span",null,a)),action:[c.a.createElement(w.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},c.a.createElement(k.a,{className:i.icon}))]}))},A=function(e){var t=e.onSubmit,a=e.formData,n=e.onChange,r=e.onSpecificationInputBlur,i=e.formOptions,l=e.loading,o=F(),u=function(e,t){n({text:e.target.value,value:e.target.value},"input",t)};return c.a.createElement("div",{className:o.container},D({formOptions:i,formData:a,classes:o,handleSelectChange:function(e){n({text:"",value:e.target.value},"select")},handleAutocompleteChange:function(e,t){n(t,"autoComplete")},handleInputChange:u,onSpecificationInputBlur:r}),q({key:"weight",error:a.weightError,inputLabel:"实际重量",inputValue:a.weight,helperText:a.weightMessage,xs:6,unit:"kg",onChange:u,onBlur:r,classes:o}),q({key:"height",error:a.heightError,inputLabel:"高度",inputValue:a.height,helperText:a.heightMessage,xs:6,onChange:u,onBlur:r,classes:o}),q({key:"materialCost",error:a.materialCostError,inputLabel:"单价",inputValue:a.materialCost,helperText:a.materialCostMessage,xs:6,unit:"元/kg",onChange:u,onBlur:r,classes:o}),q({key:"freight",error:a.freightError,inputLabel:"运费",inputValue:a.freight,helperText:a.freightMessage,xs:6,unit:"元",onChange:u,onBlur:r,classes:o}),q({key:"extraCost",error:!1,inputLabel:"其他费用",inputValue:a.extraCost,helperText:"",xs:6,unit:"元",onChange:u,onBlur:r,classes:o}),q({key:"predictWeight",error:!1,inputLabel:"预估重量",inputValue:a.predictWeight,helperText:"计算公式：体积 x 密度",xs:6,unit:"kg",readOnly:!0,required:!1,onChange:u,onBlur:r,classes:o}),c.a.createElement(h.a,{fullWidth:!0,className:o.formControl},c.a.createElement(p.a,{placeholder:"备注",rows:8,onChange:function(e){return u(e,"description")},value:a.description})),P({classes:o,onSubmit:t,loading:l}))},z=function(e){var t=e.onSubmit,a=e.formData,n=e.formOptions,r=e.onChange,i=e.onSpecificationInputBlur,l=e.loading,o=F(),u=function(e,t){r({text:e.target.value,value:e.target.value},"input",t)};return c.a.createElement("div",{className:o.container},D({formOptions:n,formData:a,classes:o,handleSelectChange:function(e){r({text:"",value:e.target.value},"select")},handleAutocompleteChange:function(e,t){r(t,"autoComplete")},handleInputChange:u,onSpecificationInputBlur:i}),q({key:"weight",error:a.weightError,inputLabel:"实际重量",inputValue:a.weight,helperText:a.weightMessage,xs:6,unit:"kg",onChange:u,onBlur:i,classes:o}),q({key:"height",error:a.heightError,inputLabel:"高度",inputValue:a.height,helperText:a.heightMessage,xs:6,onChange:u,onBlur:i,classes:o}),q({key:"materialQuantity",error:a.materialQuantityError,inputLabel:"数量",inputValue:a.materialQuantity,helperText:a.materialQuantityMessage,xs:6,unit:"个",onChange:u,onBlur:i,classes:o}),q({key:"materialCost",error:!1,inputLabel:"单价",inputValue:a.materialCost,helperText:"",xs:6,unit:"元/kg",readOnly:!0,required:!1,onChange:u,onBlur:i,classes:o}),q({key:"predictWeight",error:!1,inputLabel:"预估重量",inputValue:a.predictWeight,helperText:"计算公式：体积 x 密度",xs:6,unit:"kg",readOnly:!0,required:!1,onChange:u,onBlur:i,classes:o}),q({key:"costFee",error:!1,inputLabel:"据费",inputValue:a.costFee,helperText:"",xs:6,unit:"元/个",readOnly:!0,required:!1,onChange:u,onBlur:i,classes:o}),q({key:"predictPrice",error:!1,inputLabel:"预估总价",inputValue:a.predictPrice,helperText:"",xs:6,unit:"元",readOnly:!0,required:!1,onChange:u,onBlur:i,classes:o}),c.a.createElement(h.a,{fullWidth:!0,className:o.formControl},c.a.createElement(p.a,{placeholder:"备注",rows:8,onChange:function(e){return u(e,"description")},value:a.description})),P({classes:o,onSubmit:t,loading:l}))},J=a(1501),G=a(1502),R=a(1492),H=a(1328),K=a.n(H),U=function(e,t,a,n){return new(a||(a=Promise))((function(r,i){function l(e){try{u(n.next(e))}catch(e){i(e)}}function o(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,o)}u((n=n.apply(e,t||[])).next())}))};t.default=function(){var e=Object(s.useState)(!1),t=u()(e,2),a=t[0],n=t[1],i=Object(s.useState)(!1),o=u()(i,2),h=o[0],p=o[1],g=Object(s.useState)(!1),m=u()(g,2),d=m[0],f=m[1],v=Object(s.useState)([]),b=u()(v,2),C=b[0],y=b[1],x=Object(s.useState)([]),E=u()(x,2),S=E[0],O=E[1],j=Object(s.useState)(0),k=u()(j,2),T=k[0],B=k[1],I=Object(s.useState)(),M=u()(I,2),V=M[0],L=M[1],N=Object(s.useState)(!1),W=u()(N,2),F=W[0],q=W[1],D=Object(s.useState)(""),P=u()(D,2),H=P[0],X=P[1],Y=Object(s.useState)(),Z=u()(Y,2),$=Z[0],_=Z[1],ee=Object(s.useState)(!1),te=u()(ee,2),ae=te[0],ne=te[1],re=Object(s.useState)(""),ie=u()(re,2),le=ie[0],oe=ie[1],ue=Object(s.useState)(),se=u()(ue,2),ce=se[0],he=se[1],pe=Object(s.useState)(!1),ge=u()(pe,2),me=ge[0],de=ge[1],fe=Object(s.useState)(""),ve=u()(fe,2),be=ve[0],Ce=ve[1],ye=Object(s.useState)(),xe=u()(ye,2),Ee=xe[0],Se=xe[1],Oe=Object(s.useState)(!1),we=u()(Oe,2),je=we[0],ke=we[1],Te=Object(s.useState)(""),Be=u()(Te,2),Ie=Be[0],Me=Be[1],Ve=Object(s.useState)(),Le=u()(Ve,2),Ne=Le[0],We=Le[1],Fe=Object(s.useState)(!1),qe=u()(Fe,2),De=qe[0],Pe=qe[1],Qe=Object(s.useState)(""),Ae=u()(Qe,2),ze=Ae[0],Je=Ae[1],Ge=Object(s.useState)(),Re=u()(Ge,2),He=Re[0],Ke=Re[1],Ue=Object(s.useState)(!1),Xe=u()(Ue,2),Ye=Xe[0],Ze=Xe[1],$e=Object(s.useState)(""),_e=u()($e,2),et=_e[0],tt=_e[1],at=Object(s.useState)(),nt=u()(at,2),rt=nt[0],it=nt[1],lt=Object(s.useState)(!1),ot=u()(lt,2),ut=ot[0],st=ot[1],ct=Object(s.useState)(""),ht=u()(ct,2),pt=ht[0],gt=ht[1],mt=Object(s.useState)(),dt=u()(mt,2),ft=dt[0],vt=dt[1],bt=Object(s.useState)(),Ct=u()(bt,2),yt=Ct[0],xt=Ct[1],Et=Object(s.useState)(!1),St=u()(Et,2),Ot=St[0],wt=St[1],jt=Object(s.useState)(""),kt=u()(jt,2),Tt=kt[0],Bt=kt[1],It=Object(s.useState)(),Mt=u()(It,2),Vt=Mt[0],Lt=Mt[1],Nt=Object(s.useState)(""),Wt=u()(Nt,2),Ft=Wt[0],qt=Wt[1],Dt=Object(s.useState)(),Pt=u()(Dt,2),Qt=Pt[0],At=Pt[1],zt=Object(s.useState)(!1),Jt=u()(zt,2),Gt=Jt[0],Rt=Jt[1],Ht=Object(s.useState)(""),Kt=u()(Ht,2),Ut=Kt[0],Xt=Kt[1],Yt=Object(s.useState)(0),Zt=u()(Yt,2),$t=Zt[0],_t=Zt[1],ea=Object(s.useState)(0),ta=u()(ea,2),aa=ta[0],na=ta[1];Object(s.useEffect)((function(){U(void 0,void 0,void 0,l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/toy/get/get-material-type?sign=1");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,y(a);case 7:case"end":return e.stop()}}),e)})))}),[]);var ra=function(){var e=!1;return V||(q(!0),X("该项不能为空"),e=!0),""===ce&&(de(!0),Ce("该项不能为空"),e=!0),Ee||(ke(!0),Me("该项不能为空"),e=!0),Ne||"0"===V||(Pe(!0),Je("该项不能为空"),e=!0),He||(Ze(!0),tt("该项不能为空"),e=!0),rt||(st(!0),gt("该项不能为空"),e=!0),yt||(wt(!0),Bt("该项不能为空"),e=!0),{hasError:e,params:{materialType:V,materialCost:ce,type:T,length:Ee,width:Ne,height:He,weight:rt,freight:yt,description:Ft,extraCost:Vt,materialId:$,materialQuantity:Qt}}},ia=function(e){return U(void 0,void 0,void 0,l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/toy/get/get-detail?materialType="+e);case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,O(n);case 7:case"end":return t.stop()}}),t)})))},la=function(){f(!1),p(!1),n(!1),L(""),_(""),he(""),Se(""),We(""),Ke(""),it(""),vt(""),xt(""),Lt(""),qt(""),At(""),_t(0),na(0)},oa={materialType:V,materialTypeError:F,materialTypeMessage:H,materialId:$,materialIdError:ae,materialIdMessage:le,materialCost:ce,materialCostError:me,materialCostMessage:be,type:T,length:Ee,lengthError:je,lengthMessage:Ie,width:Ne,widthError:De,widthMessage:ze,height:He,heightError:Ye,heightMessage:et,weight:rt,weightError:ut,weightMessage:pt,predictWeight:ft,freight:yt,freightError:Ot,freightMessage:Tt,extraCost:Vt,description:Ft},ua={loading:a,onSubmit:function(){return U(void 0,void 0,void 0,l.a.mark((function e(){var t,a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(!0),t=ra(),a=t.hasError,r=t.params,!a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,fetch("/toy/good/in",{body:JSON.stringify(r),method:"POST",headers:{"Content-Type":"application/json"}});case 6:return i=e.sent,e.next=9,i.text();case 9:return"success"===e.sent?p(!0):f(!0),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))},formOptions:{materialType:C,materialId:S},onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:"",text:""},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n={materialCost:function(){he(e.value),de(""===e.value),Ce(""===e.value?"该项不能为空":"")},freight:function(){xt(e.value),wt(""===e.value),Bt(""===e.value?"该项不能为空":"")},extraCost:function(){Lt(e.value)},description:function(){qt(e.value)},length:function(){Se(e.value),ke(!e.value),Me(e.value?"":"该项不能为空")},width:function(){We(e.value),Pe(!e.value),Je(e.value?"":"该项不能为空")},height:function(){Ke(e.value),Ze(!e.value),tt(e.value?"":"该项不能为空")},weight:function(){it(e.value),st(!e.value),gt(e.value?"":"该项不能为空")},predictWeight:function(){},materialQuantity:function(){At(e.value),Rt(!e.value),Xt(e.value?"":"该项不能为空")},costFee:function(){},predictPrice:function(){}};switch(t){case"input":n[a]();break;case"select":e.value&&ia(e.value),L(e.value);break;case"autoComplete":if(null===e)return _(""),_t(0),void he(0);_t(e["锯费"]),he(e["单价"]),_(e.id),ne(""===e.id),oe(""===e.id?"该项不能为空":"")}},onSpecificationInputBlur:function(){!function(e){na(parseFloat((e*ce+Qt*$t).toFixed(1)))}(function(e,t,a,n,r){0!==r||n||(n=1);var i=function(e,t,a){var r=Math.PI*e*e;return t&&(r=e*t),parseFloat((r*a*7.874/1e3*n).toFixed(2))}(e/2/10,t/10,a/10);return e&&a?vt(i):e&&t&&a&&vt(i),i}(Ee,Ne,He,Qt,T))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(J.a,{position:"static"},c.a.createElement(G.a,null,c.a.createElement(w.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:function(){return B(0===T?1:0)}},c.a.createElement(K.a,null)),c.a.createElement(R.a,{variant:"h6"},T?"出库":"入库"))),Q({type:"success",message:"保存成功",open:h,onClose:la}),Q({type:"failed",message:"保存失败",open:d,onClose:la}),T?c.a.createElement(z,r()({formData:r()({},oa,{materialQuantity:Qt,materialQuantityError:Gt,materialQuantityMessage:Ut,costFee:$t,predictPrice:aa})},ua)):c.a.createElement(A,r()({formData:oa},ua)))}}}]);