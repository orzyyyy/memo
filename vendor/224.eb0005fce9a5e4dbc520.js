"use strict";(self.webpackChunkmemo=self.webpackChunkmemo||[]).push([[224,418,743,276,518],{8105:(n,e,t)=>{t.d(e,{Z:()=>a});const a=function(n){return n.children}},2111:(n,e,t)=>{t.r(e),t.d(e,{default:()=>l});var a=t(2256),r=t(107),o=t.n(r),c=t(9526),i=t(903),s=t(5368),u=t(1678),d=t(9479);const l=function(){var n=(0,d.O)(),e=(0,s.L)(n,"mapping",(function(e){return t=void 0,a=void 0,r=void 0,c=o().mark((function t(){var a,r,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={layout:e,id:n,category:"mapping"},t.next=3,fetch("/api/memo/document/update/content",{method:"POST",body:JSON.stringify(a),mode:"cors",headers:{"Content-Type":"application/json"}});case 3:return r=t.sent,t.next=6,r.text();case 6:c=t.sent,(0,u.showMessageAfterFetching)(c);case 8:case"end":return t.stop()}}),t)})),new(r||(r=Promise))((function(n,e){function o(n){try{s(c.next(n))}catch(n){e(n)}}function i(n){try{s(c.throw(n))}catch(n){e(n)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(n){n(t)}))).then(o,i)}s((c=c.apply(t,a||[])).next())}));var t,a,r,c})),t=(0,a.Z)(e,2),r=t[0],l=t[1];return r||(r={position:{root:{x:-3e3,y:-3e3}},block:{},tag:{},line:{}}),c.createElement(i.default,{dataSource:r,onChange:function(n){l(n)}})}},1678:(n,e,t)=>{t.r(e),t.d(e,{default:()=>l,showMessageAfterFetching:()=>d});var a=t(2256),r=t(107),o=t.n(r),c=t(9526),i=t(5368),s=t(1518),u=t(9479);function d(n){n?alert("保存成功"):alert("保存失败")}const l=function(){var n=(0,u.O)(),e=function(){return e=void 0,t=void 0,a=void 0,r=o().mark((function e(){var t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:n,layout:l,category:"markdown"},e.next=3,fetch("/api/memo/document/update/content",{body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.next=6,a.text();case 6:d(e.sent);case 8:case"end":return e.stop()}}),e)})),new(a||(a=Promise))((function(n,o){function c(n){try{s(r.next(n))}catch(n){o(n)}}function i(n){try{s(r.throw(n))}catch(n){o(n)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(n){n(t)}))).then(c,i)}s((r=r.apply(e,t||[])).next())}));var e,t,a,r},t=(0,i.L)(n,"markdown-editor",e),r=(0,a.Z)(t,2),l=r[0],f=r[1];return c.createElement(s.default,{value:l,onChange:function(n){f(n.target.value)},onSave:e})}},5368:(n,e,t)=>{t.d(e,{L:()=>s});var a=t(2256),r=t(107),o=t.n(r),c=t(9526);function i(n,e,t){return a=this,r=void 0,c=void 0,i=o().mark((function a(){var r,c;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.ctrlKey,c=n.keyCode,!r||83!==c){a.next=9;break}if(n.preventDefault(),a.t0=t,!a.t0){a.next=7;break}return a.next=7,t(e);case 7:a.next=10;break;case 9:n.stopPropagation();case 10:case"end":return a.stop()}}),a)})),new(c||(c=Promise))((function(n,e){function t(n){try{s(i.next(n))}catch(n){e(n)}}function o(n){try{s(i.throw(n))}catch(n){e(n)}}function s(e){var a;e.done?n(e.value):(a=e.value,a instanceof c?a:new c((function(n){n(a)}))).then(t,o)}s((i=i.apply(a,r||[])).next())}));var a,r,c,i}function s(n,e,t){var r=this,s="mapping"===e?"json":"md",u="./".concat(e,"/").concat(n,"/").concat(n,".").concat(s),d=(0,c.useState)(),l=(0,a.Z)(d,2),f=l[0],v=l[1];return function(n,e){(0,c.useEffect)((function(){var t=function(t){return i(t,n,e)};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[n,e])}(f,t),(0,c.useEffect)((function(){var n,t,a,c;n=r,t=void 0,a=void 0,c=o().mark((function n(){var t,a,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="mapping"===e?"json":"text",n.next=3,fetch(u);case 3:return a=n.sent,n.next=6,a[t]();case 6:r=n.sent,v(r);case 8:case"end":return n.stop()}}),n)})),new(a||(a=Promise))((function(e,r){function o(n){try{s(c.next(n))}catch(n){r(n)}}function i(n){try{s(c.throw(n))}catch(n){r(n)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a((function(n){n(t)}))).then(o,i)}s((c=c.apply(n,t||[])).next())}))}),[n,e,u]),[f,v]}},903:(n,e,t)=>{t.r(e),t.d(e,{default:()=>y});var a=t(9526),r=t(5701),o=t.n(r),c=t(8236),i=t.n(c),s=t(6080),u=t.n(s),d=t(6850),l=t.n(d),f=t(7182),v=t.n(f),p=t(9213),h=t.n(p),m=t(499),w={};w.styleTagTransform=h(),w.setAttributes=l(),w.insert=u().bind(null,"head"),w.domAPI=i(),w.insertStyleElement=v(),o()(m.Z,w),m.Z&&m.Z.locals&&m.Z.locals;var g=t(1417),x=t(8459);const y=function(n){return a.createElement("div",{className:"mapping"},a.createElement(g.Z,null),a.createElement(x.Z,{data:n.dataSource,className:"canvas-wrapper",onChange:n.onChange}))}},1518:(n,e,t)=>{t.r(e),t.d(e,{default:()=>y});var a=t(9526),r=t(4541),o=(t(239),t(5701)),c=t.n(o),i=t(8236),s=t.n(i),u=t(6080),d=t.n(u),l=t(6850),f=t.n(l),v=t(7182),p=t.n(v),h=t(9213),m=t.n(h),w=t(9961),g={};g.styleTagTransform=m(),g.setAttributes=f(),g.insert=d().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=p(),c()(w.Z,g),w.Z&&w.Z.locals&&w.Z.locals;var x=t(8105);const y=function(n){var e=n.value,t=n.onChange;return a.createElement("div",{className:"markdown-editor"},a.createElement(x.Z,null,a.createElement("textarea",{className:"markdown-body",onChange:t,value:e,onKeyUp:function(n){var e=n.currentTarget.value.substr(0,n.currentTarget.selectionStart).split("\n"),t=e.length,a=e[e.length-1].length;console.log(t+", "+a)}})),a.createElement("div",{className:"content markdown-body",dangerouslySetInnerHTML:{__html:r.TU.parse(e||"")}}))}},9479:(n,e,t)=>{t.d(e,{O:()=>a,e:()=>r});var a=function(n){var e=n||location.pathname;return e.endsWith("/")&&(e=e.substr(0,e.length-1)),e.substr(e.lastIndexOf("/")+1)},r=function(n){return n.replace(/-\w/g,(function(e,t){return n.charAt(t+1).toUpperCase()})).replace(/^\S/,(function(n){return n.toUpperCase()}))}},499:(n,e,t)=>{t.d(e,{Z:()=>i});var a=t(5402),r=t.n(a),o=t(352),c=t.n(o)()(r());c.push([n.id,".mapping .canvas-wrapper {\n  width: 2000%;\n  height: 2000vh;\n  border: 1px solid #ccc;\n  position: fixed;\n}\n",""]);const i=c},9961:(n,e,t)=>{t.d(e,{Z:()=>i});var a=t(5402),r=t.n(a),o=t(352),c=t.n(o)()(r());c.push([n.id,".markdown-editor {\n  display: grid;\n  font-size: 16px;\n  grid-template-columns: 50% 50%;\n  padding: 24px;\n  height: calc(100vh - 48px);\n  overflow: hidden;\n}\n\n.markdown-body {\n  overflow: hidden;\n}\n\n.markdown-body:hover {\n  overflow: auto;\n}\n\np {\n  text-indent: 2em; /*首行缩进*/\n}\n",""]);const i=c},1251:n=>{n.exports="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 version=%271.1%27 aria-hidden=%27true%27><path fill-rule=%27evenodd%27 d=%27M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z%27></path></svg>"}}]);