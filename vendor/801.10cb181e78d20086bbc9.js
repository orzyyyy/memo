"use strict";(self.webpackChunkmemo=self.webpackChunkmemo||[]).push([[801],{4006:(e,n,t)=>{t.d(n,{Z:()=>l});var r=t(7692),a=t(9526),c=t(3246),o=t(5701),i=t.n(o),u=t(7611);i()(u.Z,{insert:"head",singleton:!1}),u.Z.locals;const l=function(e){var n=e.style,t=e.children,o=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["style","children"]);return a.createElement("input",(0,r.Z)({style:(0,r.Z)({},c.z,n)},o),t)}},6801:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var r=t(9343),a=t(246),c=t(107),o=t.n(c),i=t(9526),u=t(5701),l=t.n(u),s=t(7596);l()(s.Z,{insert:"head",singleton:!1}),s.Z.locals;var f=t(860),p=t(1733),d=t(4006),v=function(e,n,t,r){return new(t||(t=Promise))((function(a,c){function o(e){try{u(r.next(e))}catch(e){c(e)}}function i(e){try{u(r.throw(e))}catch(e){c(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}u((r=r.apply(e,n||[])).next())}))};const m=function(){var e=(0,i.useState)([]),n=(0,a.Z)(e,2),t=n[0],c=n[1],u=(0,i.useState)(2),l=(0,a.Z)(u,2),s=l[0],m=l[1],h=(0,i.useState)(7),g=(0,a.Z)(h,2),b=g[0],w=g[1],x=function(e,n){for(var t=[],r=0;r<e;r++){for(var a={},c=0;c<n;c++)a[c]=(0,i.createRef)();t.push(a)}return t}(s,b),y=(0,i.useMemo)((function(){return x}),[s,b]),k=function(e,n){var t=e.target.value;switch(n){case"row":m(parseInt(t));break;case"col":w(parseInt(t))}};return i.createElement("div",{className:"slicing-image"},i.createElement("span",null,"行："),i.createElement(d.Z,{type:"number",value:s,onChange:function(e){return k(e,"row")}}),i.createElement("span",null,"列："),i.createElement(d.Z,{type:"number",value:b,onChange:function(e){return k(e,"col")}}),i.createElement(f.Z,{fileList:t,onChange:function(e){var n,a,i;c([].concat((0,r.Z)(t),(0,r.Z)(e))),n=e[0].url,a=b,i=s,v(void 0,void 0,void 0,o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Image).src=n,e.next=4,new Promise((function(e){t.onload=function(){for(var n,r,c=t.naturalWidth,o=t.naturalHeight,u=c/a,l=o/i,s=0;s<x.length;s++)for(var f=Object.values(x[s]),p=0;p<f.length;p++)null===(r=null===(n=f[p].current)||void 0===n?void 0:n.getContext("2d"))||void 0===r||r.drawImage(t,u*p,s*l,u,l,0,0,35,35);e(0)}}));case 4:case"end":return e.stop()}}),e)})))},uploaderVisible:0===t.length,onClick:function(e){c(t.filter((function(n){return n.id!==e.id})))},accept:"image/*"}),i.createElement("div",null,function(){for(var e=[],n=0;n<s;n++){e.push(i.createElement("div",{style:{marginTop:0===n?0:-6},key:"".concat(n,"-placeholder")}));for(var t=0;t<b;t++)e.push(i.createElement("canvas",{ref:y[n][t],width:"35",height:"35",key:"".concat(n,"-").concat(t)}))}return e}()),i.createElement(p.Z,{onClick:function(){return v(void 0,void 0,void 0,o().mark((function e(){var n,t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e,n,t){var r=e.current.toDataURL("image/png"),a=document.createElement("a");a.download="".concat(t+1,"-").concat(n+1,".png"),a.href=r,a.click()},t=o().mark((function e(t){var r,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=y[t],a=o().mark((function e(a){var c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object.values(r)[a],e.next=3,new Promise((function(e){n(c,a,t),setTimeout((function(){e(0)}),100)}));case 3:case"end":return e.stop()}}),e)})),c=0;case 3:if(!(c<Object.values(r).length)){e.next=8;break}return e.delegateYield(a(c),"t0",5);case 5:c++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})),r=0;case 3:if(!(r<y.length)){e.next=8;break}return e.delegateYield(t(r),"t0",5);case 5:r++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})))}},"下载"))}},7611:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(352),a=t.n(r)()((function(e){return e[1]}));a.push([e.id,"input {\n  border: 1px solid #e8e8e8;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n\ninput:hover {\n  border: 1px solid rgb(16, 142, 233);\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n",""]);const c=a},7596:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(352),a=t.n(r)()((function(e){return e[1]}));a.push([e.id,".slicing-image canvas {\n  margin-top: 3px;\n  margin-left: 3px;\n  border: 1px solid #ccc;\n}\n",""]);const c=a}}]);